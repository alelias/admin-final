{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Table,Button,Modal,Input,Form,Image}from\"antd\";import\"antd/dist/antd.css\";import{useMapbox}from'../../hooks/useMapbox';import\"./parkList.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TextArea=Input.TextArea;var axios=require(\"axios\");var Item=Form.Item;var baseUrl=\"https://back-calistenia.herokuapp.com/api/parque\";var imgPunto='../../img/pngegg.png';var layout={labelCol:{span:8},wrapperCol:{span:16}};var puntoInicial={lng:-70.77501632397149,lat:-33.53199106757794,zoom:15};export default function ParkList(){var _useMapbox=useMapbox(puntoInicial),setRef=_useMapbox.setRef,coords=_useMapbox.coords;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({idparque:\"\",nombre:\"\",latitud:coords.lat,longitud:coords.lng,descripcion:\"\"}),_useState4=_slicedToArray(_useState3,2),parks=_useState4[0],setParks=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalEditar=_useState6[0],setModalEditar=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalEliminar=_useState8[0],setModalEliminar=_useState8[1];var abrirCerrarModalEditar=function abrirCerrarModalEditar(){setModalEditar(!modalEditar);};var abrirCerrarModalEliminar=function abrirCerrarModalEliminar(){setModalEliminar(!modalEliminar);};var handleChange=function handleChange(_ref){var target=_ref.target;setParks(function(parks){return _objectSpread(_objectSpread({},parks),{},_defineProperty({},target.name,target.value));});};useEffect(function(){setParks(function(parks){return _objectSpread(_objectSpread({},parks),{},{latitud:coords.lat,longitud:coords.lng});});},[coords]);var seleccionarParks=function seleccionarParks(parks,caso){setParks(parks);caso===\"Editar\"?abrirCerrarModalEditar():abrirCerrarModalEliminar();};var peticionGet=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(baseUrl).then(function(response){setData(response.data);}).catch(function(error){console.log(error);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function peticionGet(){return _ref2.apply(this,arguments);};}();var postPark=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(baseUrl,parks).then(function(response){setData(data.concat(response.data));}).catch(function(error){console.log(error);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function postPark(_x){return _ref3.apply(this,arguments);};}();var peticionPut=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.put(baseUrl+\"/\"+parks.idparque,parks).then(function(response){var dataAuxiliar=data;dataAuxiliar.map(function(elemento){if(elemento.idparque===parks.idparque){elemento.nombre=parks.nombre;elemento.latitud=parks.latitud;elemento.longitud=parks.longitud;elemento.descripcion=parks.descripcion;}});setData(dataAuxiliar);abrirCerrarModalEditar();}).catch(function(error){console.log(error);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function peticionPut(){return _ref4.apply(this,arguments);};}();var peticionDelete=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.delete(baseUrl+\"/\"+parks.idparque).then(function(response){setData(data.filter(function(elemento){return elemento.idparque!==parks.idparque;}));abrirCerrarModalEliminar();}).catch(function(error){console.log(error);});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function peticionDelete(){return _ref5.apply(this,arguments);};}();useEffect(function(){peticionGet();},[]);var columns=[{title:\"Nombre\",dataIndex:\"nombre\",key:\"nombre\"},{title:\"Latitud\",dataIndex:\"latitud\",key:\"latitud\"},{title:\"Longitud\",dataIndex:\"longitud\",key:\"longitud\"},{title:\"Descripcion\",dataIndex:\"descripcion\",key:\"descripcion\"},{title:\"Acciones\",key:\"acciones\",render:function render(fila){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){return seleccionarParks(fila,\"Editar\");},children:\"Editar\"}),\" \",\"   \",/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,onClick:function onClick(){return seleccionarParks(fila,\"Eliminar\");},children:\"Eliminar\"})]});}}];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"parkList\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Parques\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contenedor-mapa \",children:[/*#__PURE__*/_jsx(\"div\",{ref:setRef,className:\"mapContainer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(Form,{style:layout,children:[/*#__PURE__*/_jsx(Item,{label:\"Nombre\",children:/*#__PURE__*/_jsx(Input,{name:\"nombre\",onChange:handleChange})}),/*#__PURE__*/_jsx(Item,{label:\"Latitud\",children:/*#__PURE__*/_jsx(Input,{name:\"latitud\",onChange:handleChange,value:coords.lat,readOnly:true})}),/*#__PURE__*/_jsx(Item,{label:\"Longitud\",children:/*#__PURE__*/_jsx(Input,{name:\"longitud\",onChange:handleChange,value:coords.lng,readOnly:true})}),/*#__PURE__*/_jsx(Item,{label:\"Descripcion\",children:/*#__PURE__*/_jsx(TextArea,{name:\"descripcion\",rows:4,onChange:handleChange})}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:postPark,children:\"Insertar\"})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Table,{locale:{emptyText:\"Cargando...\"},columns:columns,dataSource:data}),/*#__PURE__*/_jsx(Modal,{visible:modalEditar,title:\"Editar Parque\",onCancel:abrirCerrarModalEditar,centered:true,footer:[/*#__PURE__*/_jsx(Button,{onClick:abrirCerrarModalEditar,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:peticionPut,children:\"Editar\"})],children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{children:[/*#__PURE__*/_jsx(Item,{label:\"Nombre\",children:/*#__PURE__*/_jsx(Input,{name:\"nombre\",onChange:handleChange,value:parks&&parks.nombre})}),/*#__PURE__*/_jsx(Item,{label:\"Latitud\",children:/*#__PURE__*/_jsx(Input,{name:\"latitud\",onChange:handleChange,value:parks&&parks.latitud})}),/*#__PURE__*/_jsx(Item,{label:\"Longitud\",children:/*#__PURE__*/_jsx(Input,{name:\"longitud\",onChange:handleChange,value:parks&&parks.longitud})}),/*#__PURE__*/_jsx(Item,{label:\"Descripcion\",children:/*#__PURE__*/_jsx(TextArea,{name:\"descripcion\",rows:4,onChange:handleChange,value:parks&&parks.descripcion})})]}))}),/*#__PURE__*/_jsxs(Modal,{visible:modalEliminar,onCancel:abrirCerrarModalEliminar,centered:true,footer:[/*#__PURE__*/_jsx(Button,{onClick:abrirCerrarModalEliminar,children:\"No\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,onClick:peticionDelete,children:\"S\\xED\"})],children:[\"Est\\xE1s seguro que deseas eliminar el parque\",\" \",/*#__PURE__*/_jsx(\"b\",{children:parks&&parks.nombre}),\"?\"]})]})});}","map":{"version":3,"sources":["/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/src/pages/parkList/ParkList.js"],"names":["React","useState","useEffect","Table","Button","Modal","Input","Form","Image","useMapbox","TextArea","axios","require","Item","baseUrl","imgPunto","layout","labelCol","span","wrapperCol","puntoInicial","lng","lat","zoom","ParkList","setRef","coords","data","setData","idparque","nombre","latitud","longitud","descripcion","parks","setParks","modalEditar","setModalEditar","modalEliminar","setModalEliminar","abrirCerrarModalEditar","abrirCerrarModalEliminar","handleChange","target","name","value","seleccionarParks","caso","peticionGet","get","then","response","catch","error","console","log","postPark","e","post","concat","peticionPut","put","dataAuxiliar","map","elemento","peticionDelete","delete","filter","columns","title","dataIndex","key","render","fila","emptyText"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport { Table, Button, Modal, Input, Form, Image } from \"antd\";\nimport \"antd/dist/antd.css\";\n\nimport {useMapbox} from '../../hooks/useMapbox'\nimport \"./parkList.css\";\nconst { TextArea } = Input;\nconst axios = require(\"axios\");\nconst { Item } = Form;\n\nconst baseUrl = \"https://back-calistenia.herokuapp.com/api/parque\";\nconst imgPunto = '../../img/pngegg.png'\n\nconst layout = {\n  labelCol: {\n    span: 8, \n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nconst puntoInicial = {\n  lng: -70.77501632397149,\n  lat: -33.53199106757794,\n  zoom: 15\n}\n\n\nexport default function ParkList() {\n\n  const {setRef,coords} = useMapbox(puntoInicial);\n\n  const [data, setData] = useState([]);\n  const [parks, setParks] = useState({\n    idparque: \"\",\n    nombre: \"\",\n    latitud: coords.lat,\n    longitud: coords.lng,\n    descripcion: \"\",\n  });\n\n\n  const [modalEditar, setModalEditar] = useState(false);\n  const [modalEliminar, setModalEliminar] = useState(false);\n\n\n  const abrirCerrarModalEditar = () => {\n    setModalEditar(!modalEditar);\n  };\n\n  const abrirCerrarModalEliminar = () => {\n    setModalEliminar(!modalEliminar);\n  };\n\n  \n  const handleChange = ({target}) => {\n    \n    setParks(parks => (\n      { ...parks, [target.name] : target.value }\n    ) );\n  };\n  \n  useEffect(() => {\n    setParks((parks) => ({\n      ...parks, latitud: coords.lat, longitud: coords.lng\n    }))\n  },[coords])\n\n  const seleccionarParks = (parks, caso) => {\n    setParks(parks);\n    caso === \"Editar\" ? abrirCerrarModalEditar() : abrirCerrarModalEliminar();\n  };\n\n \n\n  const peticionGet = async () => {\n    \n    await axios.get(baseUrl)\n      .then((response) => {\n      \n        setData(response.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const postPark = async (e) => {\n    \n  \n    await axios\n      .post(baseUrl, parks)\n      .then((response) => {\n        setData(data.concat(response.data));\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n      \n  };\n\n  const peticionPut = async () => {\n    await axios\n      .put(baseUrl + \"/\" + parks.idparque, parks)\n      .then((response) => {\n        var dataAuxiliar = data;\n        dataAuxiliar.map((elemento) => {\n          if (elemento.idparque === parks.idparque) {\n            elemento.nombre = parks.nombre;\n            elemento.latitud = parks.latitud;\n            elemento.longitud = parks.longitud;\n            elemento.descripcion = parks.descripcion;\n          }\n        });\n        setData(dataAuxiliar);\n        abrirCerrarModalEditar();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const peticionDelete = async () => {\n    await axios\n      .delete(baseUrl + \"/\" + parks.idparque)\n      .then((response) => {\n        setData(\n          data.filter((elemento) => elemento.idparque !== parks.idparque)\n        );\n        abrirCerrarModalEliminar();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    peticionGet();\n  }, []);\n\n  const columns = [\n    {\n      title: \"Nombre\",\n      dataIndex: \"nombre\",\n      key: \"nombre\",\n    },\n    {\n      title: \"Latitud\",\n      dataIndex: \"latitud\",\n      key: \"latitud\",\n    },\n    {\n      title: \"Longitud\",\n      dataIndex: \"longitud\",\n      key: \"longitud\",\n    },\n    {\n      title: \"Descripcion\",\n      dataIndex: \"descripcion\",\n      key: \"descripcion\",\n    },\n\n    {\n      title: \"Acciones\",\n      key: \"acciones\",\n      render: (fila) => (\n        <>\n          <Button\n            type=\"primary\"\n            onClick={() => seleccionarParks(fila, \"Editar\")}\n          >\n            Editar\n          </Button>{\" \"}\n          {\"   \"}\n          <Button\n            type=\"primary\"\n            danger\n            onClick={() => seleccionarParks(fila, \"Eliminar\")}\n          >\n            Eliminar\n          </Button>\n        </>\n      ),\n    },\n  ];\n  return (\n    <>\n\n    <div className=\"parkList\">\n    \n      <br />\n      <h1>Parques</h1>\n    <div className=\"contenedor-mapa \">\n           \n        <div\n        ref={setRef}\n            className='mapContainer'\n        >\n \n        </div>\n        \n        <div className='form'>\n          <Form style={layout}>\n              <Item label=\"Nombre\">\n                <Input name=\"nombre\" onChange={handleChange} />\n              </Item>\n              <Item label=\"Latitud\">\n                <Input name=\"latitud\" onChange={handleChange} value={coords.lat} readOnly/>\n              </Item>\n              <Item label=\"Longitud\">\n                <Input name=\"longitud\"  onChange={handleChange} value={coords.lng} readOnly/>\n              </Item>\n\n              <Item label=\"Descripcion\">\n                <TextArea name=\"descripcion\" rows={4} onChange={handleChange} />\n              </Item>\n              <Button type=\"primary\" onClick={postPark}>\n              Insertar\n            </Button> \n          </Form>\n            \n        </div>\n            \n </div>\n      <br />\n \n      <br />\n      <br />\n      <Table\n        locale={{ emptyText: \"Cargando...\" }}\n        columns={columns}\n        dataSource={data}\n      />\n\n  \n      <Modal\n        visible={modalEditar}\n        title=\"Editar Parque\"\n        onCancel={abrirCerrarModalEditar}\n        centered\n        footer={[\n          <Button onClick={abrirCerrarModalEditar}>Cancelar</Button>,\n          <Button type=\"primary\" onClick={peticionPut}>\n            Editar\n          </Button>,\n        ]}\n      >\n        <Form {...layout}>\n          <Item label=\"Nombre\">\n            <Input\n              name=\"nombre\"\n              onChange={handleChange}\n              value={parks && parks.nombre}\n            />\n          </Item>\n          <Item label=\"Latitud\">\n            <Input\n              name=\"latitud\"\n              onChange={handleChange}\n              value={parks && parks.latitud}\n            />\n          </Item>\n          <Item label=\"Longitud\">\n            <Input\n              name=\"longitud\"\n              onChange={handleChange}\n              value={parks && parks.longitud}\n            />\n          </Item>\n\n          <Item label=\"Descripcion\">\n            <TextArea\n              name=\"descripcion\"\n              rows={4}\n              onChange={handleChange}\n              value={parks && parks.descripcion}\n            />\n          </Item>\n        </Form>\n      </Modal>\n\n      <Modal\n        visible={modalEliminar}\n        onCancel={abrirCerrarModalEliminar}\n        centered\n        footer={[\n          <Button onClick={abrirCerrarModalEliminar}>No</Button>,\n          <Button type=\"primary\" danger onClick={peticionDelete}>\n            Sí\n          </Button>,\n        ]}\n      >\n        Estás seguro que deseas eliminar el parque{\" \"}\n        <b>{parks && parks.nombre}</b>?\n      </Modal>\n    </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}