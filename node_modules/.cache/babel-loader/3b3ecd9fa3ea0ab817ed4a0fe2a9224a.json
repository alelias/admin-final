{"ast":null,"code":"/* eslint import/no-webpack-loader-syntax: off */import{useRef,useState,useEffect,useCallback}from'react';import mapboxgl from'!mapbox-gl';import MapboxGeocoder from'@mapbox/mapbox-gl-geocoder';const axios=require(\"axios\");mapboxgl.accessToken='pk.eyJ1Ijoid2FsZXRhIiwiYSI6ImNreGY5ZWtreTFvbnUydXE5aTF5eno4cGUifQ.tIMnTnqPoymEqgtchY33ew';const baseUrl=\"https://back-calistenia.herokuapp.com/api/parque\";//const imgPunto = '../../img/pngegg.png'\nexport const useMapbox=puntoInicial=>{const mapaDiv=useRef();const setRef=useCallback(node=>{mapaDiv.current=node;},[]);//referencia a los marcadores\nconst marcadores=useRef({});const[data,setData]=useState([]);const mapa=useRef();const[coords,setCoords]=useState(puntoInicial);useEffect(()=>{const peticionGet=async()=>{await axios.get(baseUrl).then(response=>{setData(response.data);}).catch(error=>{console.log(error);});};peticionGet();},[data]);useEffect(()=>{const map=new mapboxgl.Map({container:mapaDiv.current,style:'mapbox://styles/mapbox/streets-v11',center:[puntoInicial.lng,puntoInicial.lat],zoom:puntoInicial.zoom});map.addControl(new mapboxgl.NavigationControl());map.addControl(new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl}));data.forEach(park=>{const marker=new mapboxgl.Marker().setLngLat([parseFloat(park.longitud),parseFloat(park.latitud)]).addTo(map);});mapa.current=map;},[]);//cuando se mueve el mapa\nuseEffect(()=>{var _mapa$current;(_mapa$current=mapa.current)===null||_mapa$current===void 0?void 0:_mapa$current.on('move',()=>{const{lng,lat}=mapa.current.getCenter();setCoords({lng:lng.toFixed(6),lat:lat.toFixed(6),zoom:mapa.current.getZoom().toFixed(2)});});},[]);//agregar marcadores\n/*\n    useEffect(() => {\n        mapa.current?.on('click', agregarMarcador);\n       \n    }, [agregarMarcador])\n*/return{coords,setRef,marcadores};};","map":{"version":3,"sources":["/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/src/hooks/useMapbox.js"],"names":["useRef","useState","useEffect","useCallback","mapboxgl","MapboxGeocoder","axios","require","accessToken","baseUrl","useMapbox","puntoInicial","mapaDiv","setRef","node","current","marcadores","data","setData","mapa","coords","setCoords","peticionGet","get","then","response","catch","error","console","log","map","Map","container","style","center","lng","lat","zoom","addControl","NavigationControl","forEach","park","marker","Marker","setLngLat","parseFloat","longitud","latitud","addTo","on","getCenter","toFixed","getZoom"],"mappings":"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","sourcesContent":["/* eslint import/no-webpack-loader-syntax: off */\n\nimport {useRef,useState, useEffect, useCallback}  from 'react'\nimport mapboxgl from '!mapbox-gl'\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder'\nconst axios = require(\"axios\");\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoid2FsZXRhIiwiYSI6ImNreGY5ZWtreTFvbnUydXE5aTF5eno4cGUifQ.tIMnTnqPoymEqgtchY33ew';\nconst baseUrl = \"https://back-calistenia.herokuapp.com/api/parque\";\n\n//const imgPunto = '../../img/pngegg.png'\n\nexport const useMapbox = (puntoInicial) => {\n    \n    const mapaDiv = useRef()\n    const setRef = useCallback((node) => {\n            mapaDiv.current = node;\n    },[])\n  \n    //referencia a los marcadores\n    const marcadores = useRef({});\n\n    const [data, setData] = useState([]);\n\n    const mapa = useRef()\n    const [coords, setCoords] = useState(puntoInicial)\n\n      useEffect(() => {\n        const peticionGet = async () => {\n    \n            await axios.get(baseUrl)\n              .then((response) => {\n              \n                setData(response.data);\n              })\n              .catch((error) => {\n                console.log(error);\n              });\n          };\n        peticionGet();\n      }, [data]);\n      \n\n\n    useEffect(() => {\n        const map = new mapboxgl.Map({\n            container: mapaDiv.current,\n            style: 'mapbox://styles/mapbox/streets-v11',\n            center: [puntoInicial.lng, puntoInicial.lat],\n            zoom: puntoInicial.zoom\n        });\n        map.addControl(new mapboxgl.NavigationControl());\n        \n        map.addControl(\n            new MapboxGeocoder({\n            accessToken: mapboxgl.accessToken,\n            mapboxgl: mapboxgl\n            }) \n        );\n\n        data.forEach((park) => {\n            const marker = new mapboxgl.Marker()\n        .setLngLat([parseFloat(park.longitud),parseFloat(park.latitud)])\n        .addTo(map);\n        })\n        \n\n        mapa.current = map;\n    },[])\n\n    //cuando se mueve el mapa\n    useEffect(() => {\n        mapa.current?.on('move', () => {\n            const {lng, lat} = mapa.current.getCenter();\n            setCoords({\n                lng: lng.toFixed(6),\n                lat: lat.toFixed(6),\n                zoom: mapa.current.getZoom().toFixed(2)\n            })\n        })\n    },[])\n\n    //agregar marcadores\n    /*\n    useEffect(() => {\n        mapa.current?.on('click', agregarMarcador);\n       \n    }, [agregarMarcador])\n*/\n    return{\n        coords,\n        setRef,\n        marcadores,\n    }\n}\n"]},"metadata":{},"sourceType":"module"}