{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Table,Button,Modal,Input,Form,Select}from\"antd\";import\"antd/dist/antd.css\";import{EyeInvisibleOutlined,EyeTwoTone}from\"@ant-design/icons\";import{Link}from\"react-router-dom\";import\"./userList.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var axios=require(\"axios\");var Item=Form.Item;var Option=Select.Option;var baseUrl=\"https://back-calistenia.herokuapp.com/api/usuario\";var layout={labelCol:{span:8},wrapperCol:{span:16}};export default function UserList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({idusuario:\"\",nombre:\"\",correo:\"\",password:\"\",perfil:\"\"}),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalInsertar=_useState6[0],setModalInsertar=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalEditar=_useState8[0],setModalEditar=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),modalEliminar=_useState10[0],setModalEliminar=_useState10[1];var abrirCerrarModalInsertar=function abrirCerrarModalInsertar(){setModalInsertar(!modalInsertar);};var abrirCerrarModalEditar=function abrirCerrarModalEditar(){setModalEditar(!modalEditar);};var abrirCerrarModalEliminar=function abrirCerrarModalEliminar(){setModalEliminar(!modalEliminar);};var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUsers(_objectSpread(_objectSpread({},users),{},_defineProperty({},name,value)));console.log(users);};var handleSelectChange=function handleSelectChange(selected){setUsers(function(users){return _objectSpread(_objectSpread({},users),{},{perfil:selected});});};var seleccionarUsers=function seleccionarUsers(users,caso){setUsers(users);caso===\"Editar\"?abrirCerrarModalEditar():abrirCerrarModalEliminar();};var peticionGet=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(baseUrl).then(function(response){setData(response.data);}).catch(function(error){console.log(error);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function peticionGet(){return _ref.apply(this,arguments);};}();var peticionPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(baseUrl,users).then(function(response){setData(data.concat(response.data));abrirCerrarModalInsertar();}).catch(function(error){console.log(error);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function peticionPost(){return _ref2.apply(this,arguments);};}();var peticionPut=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.put(baseUrl+\"/\"+users.idusuario,users).then(function(response){var dataAuxiliar=data;dataAuxiliar.map(function(elemento){if(elemento.idusuario===users.idusuario){elemento.nombre=users.nombre;elemento.correo=users.correo;elemento.password=users.password;elemento.perfil=users.perfil;}});setData(dataAuxiliar);abrirCerrarModalEditar();}).catch(function(error){console.log(error);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function peticionPut(){return _ref3.apply(this,arguments);};}();var peticionDelete=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.delete(baseUrl+\"/\"+users.idusuario).then(function(response){setData(data.filter(function(elemento){return elemento.idusuario!==users.idusuario;}));abrirCerrarModalEliminar();}).catch(function(error){console.log(error);});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function peticionDelete(){return _ref4.apply(this,arguments);};}();useEffect(function(){peticionGet();},[]);var columns=[{title:\"Nombre\",dataIndex:\"nombre\",key:\"nombre\"},{title:\"Correo\",dataIndex:\"correo\",key:\"correo\"},{title:\"Perfil\",dataIndex:\"perfil\",key:\"perfil\"},{title:\"Acciones\",key:\"acciones\",render:function render(fila){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){return seleccionarUsers(fila,\"Editar\");},children:\"Editar\"}),\" \",\"   \",/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,onClick:function onClick(){return seleccionarUsers(fila,\"Eliminar\");},children:\"Eliminar\"})]});}}];return/*#__PURE__*/_jsxs(\"div\",{className:\"userList\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Usuarios\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"primary\",className:\"botonInsertar\",onClick:abrirCerrarModalInsertar,children:\"Insertar Nuevo Usuario\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Table,{locale:{emptyText:\"Cargando...\"},columns:columns,dataSource:data}),/*#__PURE__*/_jsx(Modal,{visible:modalInsertar,title:\"Insertar Usuario\",destroyOnClose:true,onCancel:abrirCerrarModalInsertar,centered:true,footer:[/*#__PURE__*/_jsx(Button,{onClick:abrirCerrarModalInsertar,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:peticionPost,children:\"Insertar\"})],children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{children:[/*#__PURE__*/_jsx(Item,{label:\"Nombre\",children:/*#__PURE__*/_jsx(Input,{name:\"nombre\",onChange:handleChange})}),/*#__PURE__*/_jsx(Item,{label:\"Correo\",children:/*#__PURE__*/_jsx(Input,{name:\"correo\",onChange:handleChange})}),/*#__PURE__*/_jsx(Item,{label:\"Password\",children:/*#__PURE__*/_jsx(Input.Password,{name:\"password\",placeholder:\"Ingresar password\",iconRender:function iconRender(visible){return visible?/*#__PURE__*/_jsx(EyeTwoTone,{}):/*#__PURE__*/_jsx(EyeInvisibleOutlined,{});},onChange:handleChange})}),/*#__PURE__*/_jsx(Item,{label:\"Perfil\",children:/*#__PURE__*/_jsxs(Select,{defaultValue:\"--Seleccione--\",style:{width:315},name:\"perfil\",onChange:handleSelectChange,children:[/*#__PURE__*/_jsx(Option,{value:\"Admin\",children:\"Admin\"},\"Admin\"),/*#__PURE__*/_jsx(Option,{value:\"App\",children:\"App\"},\"App\")]})})]}))}),/*#__PURE__*/_jsx(Modal,{visible:modalEditar,title:\"Editar Usuario\",onCancel:abrirCerrarModalEditar,centered:true,footer:[/*#__PURE__*/_jsx(Button,{onClick:abrirCerrarModalEditar,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:peticionPut,children:\"Editar\"})],children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{children:[/*#__PURE__*/_jsx(Item,{label:\"Nombre\",children:/*#__PURE__*/_jsx(Input,{name:\"nombre\",onChange:handleChange,value:users&&users.nombre})}),/*#__PURE__*/_jsx(Item,{label:\"Correo\",children:/*#__PURE__*/_jsx(Input,{name:\"correo\",onChange:handleChange,value:users&&users.correo})}),/*#__PURE__*/_jsx(Item,{label:\"Password\",children:/*#__PURE__*/_jsx(Input.Password,{name:\"password\",placeholder:\"Ingresar password\",iconRender:function iconRender(visible){return visible?/*#__PURE__*/_jsx(EyeTwoTone,{}):/*#__PURE__*/_jsx(EyeInvisibleOutlined,{});},onChange:handleChange,value:users&&users.password})}),/*#__PURE__*/_jsx(Item,{label:\"Perfil\",children:/*#__PURE__*/_jsxs(Select,{value:users&&users.perfil,style:{width:315},name:\"perfil\",onChange:handleSelectChange,children:[/*#__PURE__*/_jsx(Option,{value:\"Admin\",children:\"Admin\"},\"Admin\"),/*#__PURE__*/_jsx(Option,{value:\"App\",children:\"App\"},\"App\")]})})]}))}),/*#__PURE__*/_jsxs(Modal,{visible:modalEliminar,onCancel:abrirCerrarModalEliminar,centered:true,footer:[/*#__PURE__*/_jsx(Button,{onClick:abrirCerrarModalEliminar,children:\"No\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,onClick:peticionDelete,children:\"S\\xED\"})],children:[\"Est\\xE1s seguro que deseas eliminar el Usuario\",\" \",/*#__PURE__*/_jsx(\"b\",{children:users&&users.nombre}),\"?\"]})]});}","map":{"version":3,"sources":["/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/src/pages/userList/UserList.js"],"names":["React","useState","useEffect","Table","Button","Modal","Input","Form","Select","EyeInvisibleOutlined","EyeTwoTone","Link","axios","require","Item","Option","baseUrl","layout","labelCol","span","wrapperCol","UserList","data","setData","idusuario","nombre","correo","password","perfil","users","setUsers","modalInsertar","setModalInsertar","modalEditar","setModalEditar","modalEliminar","setModalEliminar","abrirCerrarModalInsertar","abrirCerrarModalEditar","abrirCerrarModalEliminar","handleChange","e","target","name","value","console","log","handleSelectChange","selected","seleccionarUsers","caso","peticionGet","get","then","response","catch","error","peticionPost","post","concat","peticionPut","put","dataAuxiliar","map","elemento","peticionDelete","delete","filter","columns","title","dataIndex","key","render","fila","emptyText","visible","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Table, Button, Modal, Input, Form, Select } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport { EyeInvisibleOutlined, EyeTwoTone } from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\nimport \"./userList.css\";\nconst axios = require(\"axios\");\nconst { Item } = Form;\nconst { Option } = Select;\n\nconst baseUrl = \"https://back-calistenia.herokuapp.com/api/usuario\";\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nexport default function UserList() {\n  const [data, setData] = useState([]);\n  const [users, setUsers] = useState({\n    idusuario: \"\",\n    nombre: \"\",\n    correo: \"\",\n    password: \"\",\n    perfil:\"\"\n  });\n\n  const [modalInsertar, setModalInsertar] = useState(false);\n  const [modalEditar, setModalEditar] = useState(false);\n  const [modalEliminar, setModalEliminar] = useState(false);\n\n  const abrirCerrarModalInsertar = () => {\n    setModalInsertar(!modalInsertar);\n  };\n\n  const abrirCerrarModalEditar = () => {\n    setModalEditar(!modalEditar);\n  };\n\n  const abrirCerrarModalEliminar = () => {\n    setModalEliminar(!modalEliminar);\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setUsers({ ...users, [name]: value });\n    console.log(users);\n  };\n\n  const handleSelectChange = (selected) => {\n\n    setUsers(users => (\n      { ...users, perfil : selected }\n    ));\n   \n  };\n\n  const seleccionarUsers = (users, caso) => {\n    setUsers(users);\n    caso === \"Editar\" ? abrirCerrarModalEditar() : abrirCerrarModalEliminar();\n  };\n\n  const peticionGet = async () => {\n    await axios\n      .get(baseUrl)\n      .then((response) => {\n        setData(response.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const peticionPost = async () => {\n    //delete artista.id;\n    await axios\n      .post(baseUrl, users)\n      .then((response) => {\n        setData(data.concat(response.data));\n        abrirCerrarModalInsertar();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const peticionPut = async () => {\n    await axios\n      .put(baseUrl + \"/\" + users.idusuario, users)\n      .then((response) => {\n        var dataAuxiliar = data;\n        dataAuxiliar.map((elemento) => {\n          if (elemento.idusuario === users.idusuario) {\n            elemento.nombre = users.nombre;\n            elemento.correo = users.correo;\n            elemento.password = users.password;\n            elemento.perfil = users.perfil;\n          }\n        });\n        setData(dataAuxiliar);\n        abrirCerrarModalEditar();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const peticionDelete = async () => {\n    await axios\n      .delete(baseUrl + \"/\" + users.idusuario)\n      .then((response) => {\n        setData(\n          data.filter((elemento) => elemento.idusuario !== users.idusuario)\n        );\n        abrirCerrarModalEliminar();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    peticionGet();\n  }, []);\n\n  const columns = [\n    {\n      title: \"Nombre\",\n      dataIndex: \"nombre\",\n      key: \"nombre\",\n    },\n    {\n      title: \"Correo\",\n      dataIndex: \"correo\",\n      key: \"correo\",\n    },\n    {\n      title: \"Perfil\",\n      dataIndex: \"perfil\",\n      key: \"perfil\",\n    },\n\n\n    {\n      title: \"Acciones\",\n      key: \"acciones\",\n      render: (fila) => (\n        <>\n          <Button\n            type=\"primary\"\n            onClick={() => seleccionarUsers(fila, \"Editar\")}\n          >\n            Editar\n          </Button>{\" \"}\n          {\"   \"}\n          <Button\n            type=\"primary\"\n            danger\n            onClick={() => seleccionarUsers(fila, \"Eliminar\")}\n          >\n            Eliminar\n          </Button>\n        </>\n      ),\n    },\n  ];\n  return (\n    <div className=\"userList\">\n      <br />\n      <h1>Usuarios</h1>\n      <br />\n      <Button\n        type=\"primary\"\n        className=\"botonInsertar\"\n        onClick={abrirCerrarModalInsertar}\n      >\n        Insertar Nuevo Usuario\n      </Button>\n      <br />\n      <br />\n      <Table\n        locale={{ emptyText: \"Cargando...\" }}\n        columns={columns}\n        dataSource={data}\n      />\n\n      <Modal\n        visible={modalInsertar}\n        title=\"Insertar Usuario\"\n        destroyOnClose={true}\n        onCancel={abrirCerrarModalInsertar}\n        centered\n        footer={[\n          <Button onClick={abrirCerrarModalInsertar}>Cancelar</Button>,\n          <Button type=\"primary\" onClick={peticionPost}>\n            Insertar\n          </Button>,\n        ]}\n      >\n        <Form {...layout}>\n          <Item label=\"Nombre\">\n            <Input name=\"nombre\" onChange={handleChange} />\n          </Item>\n          <Item label=\"Correo\">\n            <Input name=\"correo\" onChange={handleChange} />\n          </Item>\n          <Item label=\"Password\">\n            <Input.Password\n              name=\"password\"\n              placeholder=\"Ingresar password\"\n              iconRender={(visible) =>\n                visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\n              }\n              onChange={handleChange}\n            />\n          </Item>\n          <Item label=\"Perfil\">\n            <Select\n              defaultValue=\"--Seleccione--\"\n              style={{ width: 315 }}\n              name=\"perfil\"\n              onChange={handleSelectChange}\n            >\n                 <Option key=\"Admin\" value=\"Admin\">Admin</Option>\n                 <Option key=\"App\" value=\"App\">App</Option>\n        \n            </Select>\n          </Item>\n        </Form>\n      </Modal>\n\n      <Modal\n        visible={modalEditar}\n        title=\"Editar Usuario\"\n        onCancel={abrirCerrarModalEditar}\n        centered\n        footer={[\n          <Button onClick={abrirCerrarModalEditar}>Cancelar</Button>,\n          <Button type=\"primary\" onClick={peticionPut}>\n            Editar\n          </Button>,\n        ]}\n      >\n        <Form {...layout}>\n          <Item label=\"Nombre\">\n            <Input\n              name=\"nombre\"\n              onChange={handleChange}\n              value={users && users.nombre}\n            />\n          </Item>\n          <Item label=\"Correo\">\n            <Input\n              name=\"correo\"\n              onChange={handleChange}\n              value={users && users.correo}\n            />\n          </Item>\n          <Item label=\"Password\">\n            <Input.Password\n              name=\"password\"\n              placeholder=\"Ingresar password\"\n              iconRender={(visible) =>\n                visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />\n              }\n              onChange={handleChange}\n              value={users && users.password}\n            />\n          </Item>\n          <Item label=\"Perfil\">\n            <Select\n              value={users && users.perfil}\n              style={{ width: 315 }}\n              name=\"perfil\"\n              onChange={handleSelectChange}\n            >\n               <Option key=\"Admin\" value=\"Admin\">Admin</Option>\n                 <Option key=\"App\" value=\"App\">App</Option>\n        \n            </Select>\n          </Item>\n        </Form>\n      </Modal>\n\n      <Modal\n        visible={modalEliminar}\n        onCancel={abrirCerrarModalEliminar}\n        centered\n        footer={[\n          <Button onClick={abrirCerrarModalEliminar}>No</Button>,\n          <Button type=\"primary\" danger onClick={peticionDelete}>\n            Sí\n          </Button>,\n        ]}\n      >\n        Estás seguro que deseas eliminar el Usuario{\" \"}\n        <b>{users && users.nombre}</b>?\n      </Modal>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}