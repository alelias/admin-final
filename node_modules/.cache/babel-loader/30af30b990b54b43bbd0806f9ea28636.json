{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Table,Button,Modal,Input,Form,Select}from\"antd\";import\"antd/dist/antd.css\";//import { EditOutlined } from \"@ant-design/icons\";\n//import { Link } from \"react-router-dom\";\nimport\"./routineList.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Item=Form.Item;var Option=Select.Option;var TextArea=Input.TextArea;var baseUrl=\"https://back-calistenia.herokuapp.com/api/rutina\";var layout={labelCol:{span:8},wrapperCol:{span:16}};export default function RoutineList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({idrutina:\"\",nombre:\"\",descripcion:\"\",link:\"\",iddificultad:\"\",dificultade:{iddificultad:\"\",nombre:\"\"}}),_useState4=_slicedToArray(_useState3,2),routines=_useState4[0],setRoutines=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dataDif=_useState6[0],setDataDif=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalInsertar=_useState8[0],setModalInsertar=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),modalEditar=_useState10[0],setModalEditar=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),modalEliminar=_useState12[0],setModalEliminar=_useState12[1];var abrirCerrarModalInsertar=function abrirCerrarModalInsertar(){setModalInsertar(!modalInsertar);};var abrirCerrarModalEditar=function abrirCerrarModalEditar(){setModalEditar(!modalEditar);};var abrirCerrarModalEliminar=function abrirCerrarModalEliminar(){setModalEliminar(!modalEliminar);};var handleChange=function handleChange(_ref){var target=_ref.target;setRoutines(function(routines){return _objectSpread(_objectSpread({},routines),{},_defineProperty({},target.name,target.value));});};var handleSelectChange=function handleSelectChange(selected){setRoutines(function(routines){return _objectSpread(_objectSpread({},routines),{},{iddificultad:selected});});};useEffect(function(){var peticionGetDif=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var baseUrlDif,dificults;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:baseUrlDif=\"https://back-calistenia.herokuapp.com/api/dificultad\";_context.next=3;return axios.get(baseUrlDif);case 3:dificults=_context.sent;setDataDif(dificults.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function peticionGetDif(){return _ref2.apply(this,arguments);};}();peticionGetDif();},[]);var seleccionarRoutines=function seleccionarRoutines(routines,caso){setRoutines(routines);caso===\"Editar\"?abrirCerrarModalEditar():abrirCerrarModalEliminar();};var peticionGet=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(baseUrl).then(function(response){setData(response.data);}).catch(function(error){console.log(error);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function peticionGet(){return _ref3.apply(this,arguments);};}();var peticionPost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();console.log(routines);_context3.next=4;return axios.post(baseUrl,routines).then(function(response){setData(data.concat(response.data));abrirCerrarModalInsertar();}).catch(function(error){console.log(error);});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function peticionPost(_x){return _ref4.apply(this,arguments);};}();var peticionPut=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.put(baseUrl+\"/\"+routines.idrutina,routines).then(function(response){var dataAuxiliar=data;dataAuxiliar.map(function(elemento){if(elemento.idrutina===routines.idrutina){elemento.nombre=routines.nombre;elemento.descripcion=routines.descripcion;elemento.link=routines.link;elemento.iddificultad=routines.iddificultad;}});setData(dataAuxiliar);abrirCerrarModalEditar();}).catch(function(error){console.log(error);});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function peticionPut(){return _ref5.apply(this,arguments);};}();var peticionDelete=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.delete(baseUrl+\"/\"+routines.idrutina).then(function(response){setData(data.filter(function(elemento){return elemento.idrutina!==routines.idrutina;}));abrirCerrarModalEliminar();}).catch(function(error){console.log(error);});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function peticionDelete(){return _ref6.apply(this,arguments);};}();useEffect(function(){peticionGet();},[data]);var columns=[{title:\"Nombre\",dataIndex:\"nombre\",key:\"nombre\"},{title:\"Descripcion\",dataIndex:\"descripcion\",key:\"descripcion\",width:280},{title:\"Link\",dataIndex:\"link\",key:\"link\",width:150},{title:\"Dificultad\",dataIndex:[\"dificultade\",\"nombre\"],key:\"iddificultad\"},{title:\"Acciones\",key:\"acciones\",render:function render(fila){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){return seleccionarRoutines(fila,\"Editar\");},children:\"Editar\"}),\" \",\"   \",/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,onClick:function onClick(){return seleccionarRoutines(fila,\"Eliminar\");},children:\"Eliminar\"})]});}}];return/*#__PURE__*/_jsxs(\"div\",{className:\"routineList\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Rutinas\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"primary\",className:\"botonInsertar\",onClick:abrirCerrarModalInsertar,children:\"Insertar Nueva Rutina\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Table,{locale:{emptyText:\"Cargando...\"},columns:columns,dataSource:data}),/*#__PURE__*/_jsx(Modal,{visible:modalInsertar,title:\"Insertar Rutina\",destroyOnClose:true,onCancel:abrirCerrarModalInsertar,centered:true,footer:[/*#__PURE__*/_jsx(Button,{onClick:abrirCerrarModalInsertar,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:peticionPost,children:\"Insertar\"})],children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{children:[/*#__PURE__*/_jsx(Item,{label:\"Nombre\",children:/*#__PURE__*/_jsx(Input,{name:\"nombre\",onChange:handleChange})}),/*#__PURE__*/_jsx(Item,{label:\"Descripcion\",children:/*#__PURE__*/_jsx(TextArea,{rows:4,name:\"descripcion\",onChange:handleChange})}),/*#__PURE__*/_jsx(Item,{label:\"Link\",children:/*#__PURE__*/_jsx(Input,{name:\"link\",onChange:handleChange})}),/*#__PURE__*/_jsx(Item,{label:\"Dificultad\",children:/*#__PURE__*/_jsx(Select,{defaultValue:\"--Seleccione--\",style:{width:315},name:\"iddificultad\",onChange:handleSelectChange,children:dataDif.map(function(dificultad){return/*#__PURE__*/_jsx(Option,{value:dificultad.iddificultad,children:dificultad.nombre},dificultad.iddificultad);})})})]}))}),/*#__PURE__*/_jsx(Modal,{visible:modalEditar,title:\"Editar Rutina\",onCancel:abrirCerrarModalEditar,centered:true,footer:[/*#__PURE__*/_jsx(Button,{onClick:abrirCerrarModalEditar,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:peticionPut,children:\"Editar\"})],children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{children:[/*#__PURE__*/_jsx(Item,{label:\"Nombre\",children:/*#__PURE__*/_jsx(Input,{name:\"nombre\",onChange:handleChange,value:routines&&routines.nombre})}),/*#__PURE__*/_jsx(Item,{label:\"Descripcion\",children:/*#__PURE__*/_jsx(TextArea,{rows:4,name:\"descripcion\",onChange:handleChange,value:routines&&routines.descripcion})}),/*#__PURE__*/_jsx(Item,{label:\"Link\",children:/*#__PURE__*/_jsx(Input,{name:\"link\",onChange:handleChange,value:routines&&routines.link})}),/*#__PURE__*/_jsx(Item,{label:\"Dificultad\",children:/*#__PURE__*/_jsx(Select,{defaultValue:routines&&routines.dificultade.nombre,style:{width:315},name:\"iddificultad\",onChange:handleSelectChange,children:dataDif.map(function(dificultad){return/*#__PURE__*/_jsx(Option,{value:dificultad.iddificultad,children:dificultad.nombre},dificultad.iddificultad);})})})]}))}),/*#__PURE__*/_jsxs(Modal,{visible:modalEliminar,onCancel:abrirCerrarModalEliminar,centered:true,footer:[/*#__PURE__*/_jsx(Button,{onClick:abrirCerrarModalEliminar,children:\"No\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",danger:true,onClick:peticionDelete,children:\"S\\xED\"})],children:[\"Est\\xE1s seguro que deseas eliminar la rutina\",\" \",/*#__PURE__*/_jsx(\"b\",{children:routines&&routines.nombre}),\"?\"]})]});}","map":{"version":3,"sources":["/Users/alexelias/Desktop/proyectos-react/calisteniaApp/frontendadminv2/src/pages/routineList/RoutineList.js"],"names":["React","useState","useEffect","Table","Button","Modal","Input","Form","Select","axios","Item","Option","TextArea","baseUrl","layout","labelCol","span","wrapperCol","RoutineList","data","setData","idrutina","nombre","descripcion","link","iddificultad","dificultade","routines","setRoutines","dataDif","setDataDif","modalInsertar","setModalInsertar","modalEditar","setModalEditar","modalEliminar","setModalEliminar","abrirCerrarModalInsertar","abrirCerrarModalEditar","abrirCerrarModalEliminar","handleChange","target","name","value","handleSelectChange","selected","peticionGetDif","baseUrlDif","get","dificults","seleccionarRoutines","caso","peticionGet","then","response","catch","error","console","log","peticionPost","e","preventDefault","post","concat","peticionPut","put","dataAuxiliar","map","elemento","peticionDelete","delete","filter","columns","title","dataIndex","key","width","render","fila","emptyText","dificultad"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Table, Button, Modal, Input, Form, Select } from \"antd\";\nimport \"antd/dist/antd.css\";\n//import { EditOutlined } from \"@ant-design/icons\";\n//import { Link } from \"react-router-dom\";\nimport \"./routineList.css\";\nimport axios from \"axios\";\nconst { Item } = Form;\nconst { Option } = Select;\nconst { TextArea } = Input;\n\nconst baseUrl = \"https://back-calistenia.herokuapp.com/api/rutina\";\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nexport default function RoutineList() {\n\n  const [data, setData] = useState([]);\n  const [routines, setRoutines] = useState({\n    idrutina: \"\",\n    nombre: \"\",\n    descripcion: \"\",\n    link: \"\",\n    iddificultad: \"\",\n    dificultade: {\n      iddificultad: \"\",\n      nombre: \"\",\n    }\n  });\n\n  const [dataDif, setDataDif] = useState([]);\n \n  const [modalInsertar, setModalInsertar] = useState(false);\n  const [modalEditar, setModalEditar] = useState(false);\n  const [modalEliminar, setModalEliminar] = useState(false);\n\n  const abrirCerrarModalInsertar = () => {\n    setModalInsertar(!modalInsertar);\n  };\n\n  const abrirCerrarModalEditar = () => {\n    setModalEditar(!modalEditar);\n  };\n\n  const abrirCerrarModalEliminar = () => {\n    setModalEliminar(!modalEliminar);\n  };\n\n  const handleChange = ({target}) => {\n\n    setRoutines(routines => (\n      { ...routines, [target.name] : target.value }\n    ) );\n   \n  };\n\n  const handleSelectChange = (selected) => {\n\n    setRoutines(routines => (\n      { ...routines, iddificultad : selected }\n    ));\n   \n  };\n\n  useEffect(() => {\n    const peticionGetDif = async () => {\n      const baseUrlDif = \"https://back-calistenia.herokuapp.com/api/dificultad\";\n\n      const dificults = await axios.get(baseUrlDif);\n      setDataDif(dificults.data)\n     \n    };\n    peticionGetDif()\n  }, []);\n\n  const seleccionarRoutines = (routines, caso) => {\n    setRoutines(routines);\n    caso === \"Editar\" ? abrirCerrarModalEditar() : abrirCerrarModalEliminar();\n  };\n\n  const peticionGet = async () => {\n    await axios.get(baseUrl)\n      .then((response) => {\n        setData(response.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n\n  const peticionPost = async (e) => {\n    \n    e.preventDefault()\n    console.log(routines);\n    await axios.post(baseUrl, routines)\n      .then((response) => {\n        setData(data.concat(response.data));\n        abrirCerrarModalInsertar();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const peticionPut = async () => {\n    await axios.put(baseUrl + \"/\" + routines.idrutina, routines)\n      .then((response) => {\n        var dataAuxiliar = data;\n        dataAuxiliar.map((elemento) => {\n          if (elemento.idrutina === routines.idrutina) {\n            elemento.nombre = routines.nombre;\n            elemento.descripcion = routines.descripcion;\n            elemento.link = routines.link;\n            elemento.iddificultad = routines.iddificultad;\n          }\n        });\n        setData(dataAuxiliar);\n        abrirCerrarModalEditar();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const peticionDelete = async () => {\n    await axios.delete(baseUrl + \"/\" + routines.idrutina)\n      .then((response) => {\n        setData(\n          data.filter((elemento) => elemento.idrutina !== routines.idrutina)\n        );\n        abrirCerrarModalEliminar();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    peticionGet();\n  }, [data]);\n\n \n\n  const columns = [\n    {\n      title: \"Nombre\",\n      dataIndex: \"nombre\",\n      key: \"nombre\",\n    },\n    {\n      title: \"Descripcion\",\n      dataIndex: \"descripcion\",\n      key: \"descripcion\",\n      width: 280,\n    },\n    {\n      title: \"Link\",\n      dataIndex: \"link\",\n      key: \"link\",\n      width: 150,\n    },\n    {\n      title: \"Dificultad\",\n      dataIndex: [\"dificultade\", \"nombre\"],\n      key: \"iddificultad\",\n    },\n    {\n      title: \"Acciones\",\n      key: \"acciones\",\n      render: (fila) => (\n        <>\n          <Button\n            type=\"primary\"\n            onClick={() => seleccionarRoutines(fila, \"Editar\")}\n          >\n            Editar\n          </Button>{\" \"}\n          {\"   \"}\n          <Button\n            type=\"primary\"\n            danger\n            onClick={() => seleccionarRoutines(fila, \"Eliminar\")}\n          >\n            Eliminar\n          </Button>\n        </>\n      ),\n    },\n  ];\n  return (\n    <div className=\"routineList\">\n      <br />\n      <h1>Rutinas</h1>\n      <br />\n      <Button\n        type=\"primary\"\n        className=\"botonInsertar\"\n        onClick={abrirCerrarModalInsertar}\n      >\n        Insertar Nueva Rutina\n      </Button>\n      <br />\n      <br />\n      <Table\n        locale={{ emptyText: \"Cargando...\" }}\n        columns={columns}\n        dataSource={data}\n      />\n\n      <Modal\n        visible={modalInsertar}\n        title=\"Insertar Rutina\"\n        destroyOnClose={true}\n        onCancel={abrirCerrarModalInsertar}\n        centered\n        footer={[\n          <Button onClick={abrirCerrarModalInsertar}>Cancelar</Button>,\n          <Button type=\"primary\" onClick={peticionPost}>\n            Insertar\n          </Button>,\n        ]}\n      >\n        <Form {...layout} >\n          <Item label=\"Nombre\">\n            <Input name=\"nombre\" onChange={handleChange} />\n          </Item>\n          <Item label=\"Descripcion\">\n            <TextArea rows={4} name=\"descripcion\" onChange={handleChange} />\n          </Item>\n          <Item label=\"Link\">\n            <Input name=\"link\" onChange={handleChange} />\n          </Item>\n          <Item label=\"Dificultad\">\n            <Select\n              defaultValue=\"--Seleccione--\"\n              style={{ width: 315 }}\n              name=\"iddificultad\"\n              onChange={handleSelectChange}\n            >\n              \n              {\n              dataDif.map((dificultad) =>\n              (\n                 <Option key={dificultad.iddificultad} value={dificultad.iddificultad}>{dificultad.nombre}</Option>\n              ))\n              }\n            \n           \n            </Select>\n          </Item>\n        </Form>\n      </Modal>\n\n      <Modal\n        visible={modalEditar}\n        title=\"Editar Rutina\"\n        onCancel={abrirCerrarModalEditar}\n        centered\n        footer={[\n          <Button onClick={abrirCerrarModalEditar}>Cancelar</Button>,\n          <Button type=\"primary\" onClick={peticionPut}>\n            Editar\n          </Button>,\n        ]}\n      >\n        <Form {...layout}>\n          <Item label=\"Nombre\">\n            <Input\n              name=\"nombre\"\n              onChange={handleChange}\n              value={routines && routines.nombre}\n            />\n          </Item>\n  \n          <Item label=\"Descripcion\">\n            <TextArea\n              rows={4}\n              name=\"descripcion\"\n              onChange={handleChange}\n              value={routines && routines.descripcion}\n            />\n          </Item>\n          <Item label=\"Link\">\n            <Input\n              name=\"link\"\n              onChange={handleChange}\n              value={routines && routines.link}\n            />\n          </Item>\n          <Item label=\"Dificultad\">\n            <Select\n              defaultValue={routines && routines.dificultade.nombre}\n              style={{ width: 315 }}\n              name=\"iddificultad\"\n              onChange={handleSelectChange}\n            >\n               {\n              dataDif.map(dificultad =>\n              (\n                 <Option key={dificultad.iddificultad} value={dificultad.iddificultad}>{dificultad.nombre}</Option>\n              ))\n              }\n            \n            </Select>\n          </Item>\n        </Form>\n      </Modal>\n\n      <Modal\n        visible={modalEliminar}\n        onCancel={abrirCerrarModalEliminar}\n        centered\n        footer={[\n          <Button onClick={abrirCerrarModalEliminar}>No</Button>,\n          <Button type=\"primary\" danger onClick={peticionDelete}>\n            Sí\n          </Button>,\n        ]}\n      >\n        Estás seguro que deseas eliminar la rutina{\" \"}\n        <b>{routines && routines.nombre}</b>?\n      </Modal>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}